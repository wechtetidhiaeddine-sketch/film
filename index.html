<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>World Movies</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #111;
  color: white;
}

header {
  padding: 15px;
  text-align: center;
  background: #000;
}

select, input {
  padding: 8px;
  border-radius: 6px;
  border: none;
  margin: 5px;
}

.results {
  padding: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 15px;
}

.card {
  background: #1c1c1c;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
  font-size: 14px;
}

.card img {
  width: 100%;
  height: 240px;
  object-fit: cover;
}

.card p {
  margin: 5px;
  text-align: center;
}

.fav {
  position: absolute;
  top: 5px;
  right: 5px;
  cursor: pointer;
}

iframe {
  width: 100%;
  height: 200px;
  border: none;
}
</style>
</head>

<body>

<header>
  <h2 id="title">üé¨ World Movies</h2>

  <select id="lang" onchange="changeLang()">
    <option value="en">English</option>
    <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
    <option value="fr">Fran√ßais</option>
  </select>

  <br>
  <input id="search" type="text" placeholder="Search movie and press Enter">
</header>

<div class="results" id="results"></div>

<script>
const API_KEY = "f4a3f84e2c82b0b2f13c9f19e1b5c6a1"; // ŸÖÿ´ÿßŸÑ ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿå ŸäŸÅÿ∂ŸÑ ÿ™ÿ¨Ÿäÿ® ŸÖŸÅÿ™ÿßÿ≠ ÿÆÿßÿµ ÿ®ŸäŸÉ
const results = document.getElementById("results");
const searchInput = document.getElementById("search");
const title = document.getElementById("title");
const langSelect = document.getElementById("lang");

let language = "en";
let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

const texts = {
  en: {
    title: "üé¨ World Movies",
    placeholder: "Search movie and press Enter",
    fav: "Added to favorites ‚ù§Ô∏è",
    notrailer: "No Trailer"
  },
  ar: {
    title: "üé¨ ÿ£ŸÅŸÑÿßŸÖ ÿßŸÑÿπÿßŸÑŸÖ",
    placeholder: "ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖ ÿßŸÑŸÅŸäŸÑŸÖ Ÿàÿßÿ∂ÿ∫ÿ∑ Enter",
    fav: "ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑŸÖŸÅÿ∂ŸÑÿ© ‚ù§Ô∏è",
    notrailer: "ŸÑÿß ŸäŸàÿ¨ÿØ ÿ•ÿπŸÑÿßŸÜ"
  },
  fr: {
    title: "üé¨ Films du Monde",
    placeholder: "Entrez le nom du film et appuyez sur Enter",
    fav: "Ajout√© aux favoris ‚ù§Ô∏è",
    notrailer: "Pas de bande-annonce"
  }
};

function changeLang() {
  language = langSelect.value;
  title.textContent = texts[language].title;
  searchInput.placeholder = texts[language].placeholder;
}

searchInput.addEventListener("keydown", e => {
  if (e.key === "Enter") searchMovies(searchInput.value);
});

async function searchMovies(query) {
  if (!query) return;
  results.innerHTML = "‚è≥ ...";

  const res = await fetch(
    `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(query)}&language=${language}`
  );
  const data = await res.json();
  results.innerHTML = "";

  if (data.results.length === 0) {
    results.innerHTML = `<p style="text-align:center">No movies found</p>`;
    return;
  }

  data.results.slice(0, 8).forEach(movie => createCard(movie));
}

async function createCard(movie) {
  const poster = movie.poster_path
    ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`
    : "https://via.placeholder.com/500x750?text=No+Image";

  const trailerRes = await fetch(
    `https://api.themoviedb.org/3/movie/${movie.id}/videos?api_key=${API_KEY}`
  );
  const trailerData = await trailerRes.json();
  const trailer = trailerData.results.find(v => v.type === "Trailer");

  const card = document.createElement("div");
  card.className = "card";

  card.innerHTML = `
    <div class="fav" onclick="addFav(${movie.id}, '${movie.title.replace(/'/g, "\\'")}')">‚ù§Ô∏è</div>
    <img src="${poster}">
    <p>${movie.title} (${movie.release_date ? movie.release_date.split('-')[0] : 'N/A'})</p>
    ${
      trailer
        ? `<iframe src="https://www.youtube.com/embed/${trailer.key}"></iframe>`
        : `<p>${texts[language].notrailer}</p>`
    }
  `;

  results.appendChild(card);
}

function addFav(id, title) {
  if (!favorites.find(f => f.id === id)) {
    favorites.push({ id, title });
    localStorage.setItem("favorites", JSON.stringify(favorites));
    alert(texts[language].fav);
  }
}

changeLang();
</script>

</body>
</html>
